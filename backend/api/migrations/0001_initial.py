# Generated by Django 3.2.9 on 2021-11-29 05:07

import django.contrib.auth.models
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='Asset',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('num', models.IntegerField(verbose_name='자산번호')),
                ('area_alias', models.CharField(choices=[('FISM', '정보보호관리체계'), ('SRV', '서버'), ('DBM', '데이터베이스'), ('INF', '네트워크 인프라'), ('NET', '네트워크 장비'), ('WEB', '웹 애플리케이션'), ('MOB', '모바일 애플리케이션'), ('HTS', 'HTS')], max_length=10, verbose_name='분야')),
                ('code', models.CharField(default='', max_length=100, verbose_name='자산코드')),
                ('name', models.CharField(default='', max_length=100, verbose_name='업무명/용도')),
                ('assessors', models.CharField(blank=True, default='', max_length=100, null=True, verbose_name='평가자')),
                ('note', models.TextField(blank=True, default='', null=True, verbose_name='비고')),
                ('full_code', models.CharField(max_length=100, null=True, verbose_name='자산전체코드')),
                ('parents', models.CharField(max_length=10, null=True, verbose_name='기준자산')),
                ('hostname', models.CharField(blank=True, default='', max_length=100, verbose_name='호스트명')),
                ('is_switch', models.BooleanField(blank=True, choices=[(True, '스위치'), (False, '라우터')], default=True, verbose_name='스위치/라우터 여부')),
                ('is_external', models.BooleanField(blank=True, choices=[(False, '아니오'), (True, '예')], default=False, verbose_name='대외구간 연결')),
                ('backup_cycle', models.IntegerField(blank=True, default=0, verbose_name='백업주기(일)')),
                ('pwd_change_cycle', models.IntegerField(blank=True, default=0, verbose_name='비밀번호변경주기(일)')),
                ('ip_url', models.CharField(blank=True, default='', max_length=200, verbose_name='IP/URL')),
                ('is_financial', models.BooleanField(choices=[(False, '아니오'), (True, '예')], default=False, verbose_name='전자금융서비스 여부')),
                ('is_https', models.BooleanField(choices=[(False, '아니오'), (True, '예')], default=False, verbose_name='HTTPS 적용 여부')),
                ('version', models.CharField(blank=True, default='', max_length=100, null=True, verbose_name='버전')),
                ('platform', models.CharField(default='NONE', max_length=20, verbose_name='자산종류')),
                ('platform_t', models.CharField(blank=True, default='', max_length=100, null=True, verbose_name='자산세부종류')),
                ('product_model', models.CharField(blank=True, default='', max_length=100, verbose_name='제조사/제품명')),
                ('asset_value', models.IntegerField(choices=[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)], default=3, verbose_name='자산가치')),
                ('operator', models.CharField(blank=True, default='', max_length=50, null=True, verbose_name='담당자')),
                ('progress', models.PositiveSmallIntegerField(choices=[(1, '초기단계(1)'), (2, '스캔준비(2)'), (3, '스캔완료(3)'), (4, '확인점검(4)'), (5, '점검완료(5)')], default=1, null=True, verbose_name='진행단계')),
                ('is_test', models.BooleanField(choices=[(False, '아니오'), (True, '예')], default=False, verbose_name='테스트환경 여부')),
                ('is_server', models.BooleanField(choices=[(False, '아니오'), (True, '예')], default=False, verbose_name='서버측 점검 여부')),
                ('is_new', models.BooleanField(choices=[(False, '아니오'), (True, '예')], default=True, verbose_name='신규 여부')),
                ('manual_done', models.BooleanField(default=False, verbose_name='평가완료 여부')),
                ('gubun', models.CharField(choices=[('NONE', '-----------')], default='NONE', max_length=20, verbose_name='자산구분')),
                ('instance_name', models.CharField(blank=True, max_length=100, null=True, verbose_name='인스턴스명')),
            ],
            options={
                'ordering': ['num'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Compliance',
            fields=[
                ('id', models.IntegerField(default=1)),
                ('name', models.CharField(max_length=100, verbose_name='기준명')),
                ('category', models.CharField(max_length=100, verbose_name='평가기준 구분')),
                ('code', models.CharField(max_length=100, primary_key=True, serialize=False, unique=True, verbose_name='기준 코드')),
                ('alias', models.CharField(max_length=100, verbose_name='별칭')),
                ('year', models.SmallIntegerField(choices=[(2015, 2015), (2016, 2016), (2017, 2017), (2018, 2018), (2019, 2019), (2020, 2020), (2021, 2021), (2022, 2022), (2023, 2023), (2024, 2024), (2025, 2025), (2026, 2026), (2027, 2027), (2028, 2028), (2029, 2029), (2030, 2030), (2031, 2031), (2032, 2032), (2033, 2033), (2034, 2034), (2035, 2035), (2036, 2036), (2037, 2037), (2038, 2038), (2039, 2039), (2040, 2040), (2041, 2041), (2042, 2042), (2043, 2043), (2044, 2044), (2045, 2045), (2046, 2046), (2047, 2047), (2048, 2048), (2049, 2049)], default=2021, verbose_name='발표 년도')),
                ('no', models.SmallIntegerField(default=1, verbose_name='등록 번호')),
                ('date', models.DateField(blank=True, null=True, verbose_name='등록 일자')),
            ],
            options={
                'ordering': ['code'],
            },
        ),
        migrations.CreateModel(
            name='ComplianceArea',
            fields=[
                ('id', models.IntegerField(default=1)),
                ('name', models.CharField(blank=True, max_length=100, verbose_name='분야명')),
                ('code', models.CharField(max_length=100, primary_key=True, serialize=False, unique=True, verbose_name='분야 코드')),
                ('compliance_code', models.CharField(max_length=100, verbose_name='기준')),
                ('alias', models.CharField(max_length=100, verbose_name='분야 별칭')),
                ('compliance_type', models.ForeignKey(default=None, on_delete=django.db.models.deletion.CASCADE, to='api.compliance', verbose_name='컴플라이언스')),
            ],
            options={
                'ordering': ['code'],
            },
        ),
        migrations.CreateModel(
            name='CustomUser',
            fields=[
                ('user_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='auth.user')),
            ],
            options={
                'verbose_name': 'user',
                'verbose_name_plural': 'users',
                'abstract': False,
            },
            bases=('auth.user',),
            managers=[
                ('objects', django.contrib.auth.models.UserManager()),
            ],
        ),
        migrations.CreateModel(
            name='Project',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='프로젝트명')),
                ('category', models.CharField(blank=True, choices=[('종합', '종합'), ('공개용', '공개용')], default='종합', max_length=100, verbose_name='평가구분')),
                ('start_date', models.DateField(verbose_name='시작일')),
                ('end_date', models.DateField(verbose_name='종료일')),
                ('client_company', models.CharField(max_length=100, verbose_name='대상기관')),
                ('assessment_company', models.CharField(max_length=100, verbose_name='평가기관')),
                ('note', models.TextField(blank=True, verbose_name='비고')),
                ('document_num', models.CharField(blank=True, max_length=100, null=True, verbose_name='문서번호')),
                ('man_day', models.SmallIntegerField(blank=True, null=True, verbose_name='적수')),
                ('area', models.ManyToManyField(to='api.ComplianceArea', verbose_name='평가분야')),
                ('assessors', models.ManyToManyField(blank=True, to='api.CustomUser', verbose_name='프로젝트 참여자')),
                ('compliance', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.compliance', verbose_name='평가기준')),
            ],
            options={
                'ordering': ['start_date'],
            },
        ),
        migrations.CreateModel(
            name='VulnerabilityItem',
            fields=[
                ('id', models.IntegerField(default=1)),
                ('category', models.CharField(max_length=100, verbose_name='구분')),
                ('area_alias', models.CharField(max_length=100, verbose_name='평가분야')),
                ('domain', models.CharField(max_length=100, verbose_name='통제분야')),
                ('group_1', models.CharField(max_length=100, verbose_name='통제구분(대)')),
                ('group_2', models.CharField(max_length=100, verbose_name='통제구분(중)')),
                ('group_3', models.CharField(max_length=100, verbose_name='통제구분(소)')),
                ('code', models.CharField(max_length=100, verbose_name='취약점 코드')),
                ('full_code', models.CharField(max_length=100, primary_key=True, serialize=False, unique=True, verbose_name='취약점 전체 코드')),
                ('alias', models.CharField(max_length=100, verbose_name='취약점 별칭')),
                ('name', models.TextField(verbose_name='취약점명')),
                ('type', models.CharField(max_length=100, verbose_name='취약점 구분')),
                ('platform', models.CharField(blank=True, default='NONE', max_length=100, verbose_name='자산종류')),
                ('gubun', models.CharField(blank=True, default='', max_length=100, verbose_name='항목상세구분')),
                ('is_server', models.BooleanField(default=False, verbose_name='서버측 점검 여부')),
                ('raw_name', models.TextField(blank=True, verbose_name='조항')),
                ('raw_con', models.TextField(blank=True, verbose_name='조항내용')),
                ('guide', models.TextField(blank=True, verbose_name='가이드')),
                ('is_https', models.BooleanField(default=False, verbose_name='HTTPS')),
                ('is_financial', models.BooleanField(default=False, verbose_name='전자금융')),
                ('is_switch', models.BooleanField(blank=True, default=False, verbose_name='스위치여부')),
                ('is_router', models.BooleanField(blank=True, default=False, verbose_name='라우터여부')),
                ('default_status', models.TextField(blank=True, verbose_name='현재상태 기본값')),
                ('risk', models.IntegerField(blank=True, default=0, verbose_name='위험도')),
                ('cii_risk_1', models.IntegerField(blank=True, default=0, verbose_name='주요정보통신기반시설_위험도1')),
                ('cii_risk_2', models.IntegerField(blank=True, default=0, verbose_name='주요정보통신기반시설_위험도2')),
                ('cii_raw_con_1', models.TextField(blank=True, verbose_name='주요정보통신기반시설1')),
                ('cii_raw_con_2', models.TextField(blank=True, verbose_name='주요정보통신기반시설2')),
                ('description', models.TextField(blank=True, verbose_name='취약점 설명')),
                ('checking_guide', models.TextField(blank=True, verbose_name='취약점 점검방법')),
                ('judgment_guide', models.TextField(blank=True, verbose_name='취약점 판단기준')),
                ('solution', models.TextField(blank=True, verbose_name='취약점 조치방법')),
                ('compliance', models.TextField(blank=True, verbose_name='평가기준')),
                ('sorting_id', models.IntegerField(default=0)),
                ('compliance_area_type', models.ForeignKey(default=None, on_delete=django.db.models.deletion.CASCADE, to='api.compliancearea')),
            ],
            options={
                'ordering': ['full_code'],
            },
        ),
        migrations.CreateModel(
            name='Vulnerability',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.TextField(blank=True, default='', verbose_name='현재상태')),
                ('auto_result', models.CharField(default='', max_length=10, verbose_name='자동분석결과')),
                ('auto_result_reason', models.TextField(blank=True, default='', verbose_name='자동분석결과_검출사유')),
                ('result', models.CharField(blank=True, default='', max_length=10, verbose_name='분석결과')),
                ('check_method', models.TextField(blank=True, default='', verbose_name='점검방식')),
                ('sampling', models.TextField(blank=True, default='', verbose_name='샘플링 자산')),
                ('is_reported', models.BooleanField(default=False, null=True, verbose_name='전달')),
                ('is_patched', models.BooleanField(default=False, null=True, verbose_name='조치여부')),
                ('new_description', models.TextField(blank=True, default='', verbose_name='개별상세설명')),
                ('new_solution', models.TextField(blank=True, default='', verbose_name='개별조치방법')),
                ('gathering_data', models.TextField(blank=True, default='', verbose_name='수집정보')),
                ('is_test', models.BooleanField(default=False, verbose_name='분석환경')),
                ('needs_login', models.BooleanField(default=False, verbose_name='로그인')),
                ('is_new', models.BooleanField(default=True, null=True, verbose_name='신규여부(신규/기존)')),
                ('asset', models.ForeignKey(default=None, on_delete=django.db.models.deletion.CASCADE, to='api.asset')),
                ('project', models.ForeignKey(default=None, on_delete=django.db.models.deletion.CASCADE, to='api.project')),
                ('vulnerability_item', models.ForeignKey(default=None, on_delete=django.db.models.deletion.CASCADE, to='api.vulnerabilityitem')),
            ],
            options={
                'ordering': ['asset__code', 'vulnerability_item__code'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='POC',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('result', models.CharField(default='', max_length=10, verbose_name='취약여부')),
                ('auto_result', models.CharField(default='', max_length=10, verbose_name='자동판단결과')),
                ('point', models.TextField(default='', verbose_name='취약항목')),
                ('found_date', models.DateField(blank=True, null=True, verbose_name='등록일자')),
                ('is_reported', models.BooleanField(default=False, verbose_name='전달')),
                ('reported_date', models.DateField(blank=True, null=True, verbose_name='전달일자')),
                ('is_patched', models.BooleanField(default=False, verbose_name='조치확인')),
                ('patched_date', models.DateField(blank=True, null=True, verbose_name='조치확인일자')),
                ('is_new', models.BooleanField(default=True, verbose_name='신규여부(신규/기존)')),
                ('note', models.TextField(blank=True, default='', verbose_name='비고')),
                ('vulnerability', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.vulnerability')),
            ],
            options={
                'ordering': ['-found_date'],
            },
        ),
        migrations.AddField(
            model_name='asset',
            name='project',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.project', verbose_name='프로젝트'),
        ),
    ]
